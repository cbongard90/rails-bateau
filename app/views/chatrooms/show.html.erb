<div class="container messages">
  <% participant = @chatroom.participants.reject{ |participant| participant.user == current_user }%>
  <h1><%= link_to "Back", chatrooms_path, class:'btn btn-success' %> <%= participant.first.user.first_name%> <%= participant.first.user.last_name%></h1>
  <div id="messages" data-chatroom-id="<%= @chatroom.id%>">
    <% @chatroom.messages.each do |message|%>
      <div id="message-<%= message.id%>"
        <% if current_user == message.user %>
          class="d-flex justify-content-end"
        <% else %>
          class="d-flex justify-content-start"
        <% end %>
      >
        <div
          <% if current_user == message.user %>
            class="message-box-current-user bg-dark text-light"
          <% else %>
            class="message-box-other-user bg-light"
          <% end %>
        >
          <h5><%= message.user.first_name%></h5>
          <p><%= message.content%></p>
          <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="container fixed-bottom bg-light">
  <%= simple_form_for [ @chatroom, @message ], remote: true do |f| %>
    <%= f.input :content, as: :rich_text_area, label: false, placeholder: "Message #{participant.first.user.first_name} #{participant.first.user.last_name}" %>
    <div class="text-right">
      <%= f.submit class:"btn btn-primary"%>
    </div>
  <% end %>
</div>

